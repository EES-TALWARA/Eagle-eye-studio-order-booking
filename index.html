<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>EEST Order Booking</title>
<style>
:root {
  --accent: #00b4ff;
  --bg1: #000000;
  --bg2: #121212;
  --card: rgba(255,255,255,0.06);
  --border: rgba(255,255,255,0.1);
  --text: #fff;
}
body {
  margin:0;
  font-family: 'Segoe UI', Arial, sans-serif;
  background: radial-gradient(circle at top left, var(--bg2), var(--bg1));
  color: var(--text);
}
.container {
  max-width: 760px;
  margin: 25px auto;
  padding: 20px;
}
.card {
  background: var(--card);
  backdrop-filter: blur(6px);
  padding: 18px;
  border-radius: 14px;
  margin-bottom: 16px;
  border: 1px solid var(--border);
  box-shadow: 0 0 12px rgba(0,0,0,0.4);
}
label {
  display:block;
  margin:8px 0 4px;
  font-weight:600;
}
input, select, textarea {
  width:100%;
  padding:10px;
  border-radius:8px;
  border:1px solid var(--border);
  background:rgba(255,255,255,0.05);
  color:#fff;
}
input::placeholder, textarea::placeholder {
  color:#aaa;
}
.btn {
  background:var(--accent);
  color:#fff;
  border:none;
  padding:12px 18px;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
  transition:0.2s;
}
.btn:hover {
  background:#0090d6;
}
.small {
  font-size:13px;
  color:#cfcfcf;
}
.total {
  background:rgba(255,255,255,0.07);
  padding:10px;
  border-radius:8px;
  margin-top:10px;
}
</style>
</head>
<body>
<div class="container">
  <div style="text-align:center;margin-bottom:8px">
    <img src="EEST_logo.png" alt="EEST" style="height:72px"/>
    <h2 style="margin:6px 0">EEST Order Booking</h2>
    <div class="small">Eagle Eye Studio ‚Äî Talwara, Banswara</div>
  </div>

  <div class="card">
    <label>‡§®‡§æ‡§Æ</label><input id="name" placeholder="‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ">
    <label>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤</label><input id="mobile" placeholder="10-digit mobile">
    <label>Gmail</label><input id="email" placeholder="client@gmail.com">
    <label>‡§ó‡§æ‡§Å‡§µ</label><input id="village" placeholder="‡§ó‡§æ‡§Å‡§µ/‡§∂‡§π‡§∞ ‡§ï‡§æ ‡§®‡§æ‡§Æ">
    <label>Google Map Link (optional)</label><input id="map" placeholder="https://maps.google.com/?q=...">
  </div>

  <div class="card">
    <label>Service</label>
    <select id="serviceSel" onchange="renderServiceDetails()">
      <option value="">-- ‡§ö‡•Å‡§®‡•á‡§Ç --</option>
      <option data-price="3500" data-camera="Canon 6D Mark II" value="p1">1 Day Traditional Photography ‚Äî ‚Çπ3500/day</option>
      <option data-price="3500" data-camera="Sony NX100" value="v1">1 Day Traditional Videography ‚Äî ‚Çπ3500/day</option>
    </select>

    <label>Days</label><input id="days" type="number" min="1" value="1" onchange="calculate()">
    <label>Dates & Times</label>
    <div id="datesWrap" style="margin-top:8px"></div>

    <div class="total" id="totals">
      <div>Total: ‚Çπ<span id="total">0</span></div>
      <div>Advance (20%): ‚Çπ<span id="advance">0</span></div>
      <div>Per-day share (50% split): ‚Çπ<span id="perday">0</span></div>
    </div>

    <label>Notes (optional)</label><textarea id="notes" rows="2"></textarea>
    <div style="margin-top:12px"><button class="btn" onclick="reviewAndSend()">Review & Send</button></div>
  </div>

  <div class="card small" style="text-align:center">
    ‡§Ü‡§™‡§ï‡§æ ‡§°‡•á‡§ü‡§æ 90 ‡§¶‡§ø‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§π‡§ü ‡§∏‡§ï‡§§‡§æ ‡§π‡•à ‚Äî ‡§ï‡•É‡§™‡§Ø‡§æ 90 ‡§¶‡§ø‡§®‡•ã‡§Ç ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§ï‡§≤‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§
  </div>
</div>

<script>
const CONFIG = {
  STUDIO_WHATSAPP: "9196367897528",
  STUDIO_EMAIL: "kdkalal25014@gmail.com",
  APPS_SCRIPT_URL: "https://script.google.com/macros/s/AKfycbymfn1kn94TD5OVwdxTCQteIV8hIzT0oib_PEzTaGk/dev"
};

let currentSelection = null;

function renderServiceDetails(){
  const sel = document.getElementById('serviceSel');
  const idx = sel.selectedIndex;
  if(idx<=0){ currentSelection=null; calculate(); return;}
  const option = sel.options[idx];
  currentSelection = {
    id: option.value,
    price: parseInt(option.dataset.price),
    camera: option.dataset.camera,
    title: option.text
  };
  calculate();
  renderDates();
}

function renderDates(){
  const wrap = document.getElementById('datesWrap'); wrap.innerHTML='';
  const days = Math.max(1, parseInt(document.getElementById('days').value||1));
  for(let i=0;i<days;i++){
    const d = document.createElement('div');
    d.style.marginTop='6px';
    d.innerHTML = `Day ${i+1}: <input type="date" id="date_${i}"> <input type="time" id="time_${i}">`;
    wrap.appendChild(d);
  }
}

function calculate(){
  if(!currentSelection){ 
    document.getElementById('total').textContent=0;
    document.getElementById('advance').textContent=0;
    document.getElementById('perday').textContent=0;
    return;
  }
  const days = Math.max(1, parseInt(document.getElementById('days').value||1));
  const total = currentSelection.price * days;
  const advance = Math.round(total * 0.20);
  const fifty = Math.round(total * 0.50);
  const perday = Math.round(fifty / days);
  document.getElementById('total').textContent = total;
  document.getElementById('advance').textContent = advance;
  document.getElementById('perday').textContent = perday;
}

function reviewAndSend(){
  const name=document.getElementById('name').value.trim(); if(!name){ alert('‡§®‡§æ‡§Æ ‡§°‡§æ‡§≤‡•á‡§Ç'); return;}
  const mobile=document.getElementById('mobile').value.trim(); if(!mobile){ alert('‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§°‡§æ‡§≤‡•á‡§Ç'); return;}
  if(!currentSelection){ alert('Service ‡§ö‡•Å‡§®‡•á‡§Ç'); return;}
  
  const days = Math.max(1, parseInt(document.getElementById('days').value||1));
  const dates=[];
  for(let i=0;i<days;i++){
    const date = document.getElementById(`date_${i}`).value;
    const time = document.getElementById(`time_${i}`).value;
    if(!date || !time){ alert('‡§∏‡§≠‡•Ä ‡§¶‡§ø‡§®‡•ã‡§Ç ‡§ï‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§î‡§∞ ‡§∏‡§Æ‡§Ø ‡§≠‡§∞‡•á‡§Ç'); return;}
    dates.push({date,time});
  }
  const payload = {
    name, mobile, email: document.getElementById('email').value.trim(),
    village: document.getElementById('village').value.trim(),
    map: document.getElementById('map').value.trim(),
    notes: document.getElementById('notes').value.trim(),
    selections: [{ id: currentSelection.id, title: currentSelection.title, camera: currentSelection.camera, price: currentSelection.price, days, dates }],
    total: parseInt(document.getElementById('total').textContent||0),
    advance: parseInt(document.getElementById('advance').textContent||0),
    timestamp: new Date().toISOString()
  };

  fetch(CONFIG.APPS_SCRIPT_URL, {
    method:'POST', mode:'cors', headers:{'Content-Type':'application/json'},
    body: JSON.stringify(payload)
  }).then(r=>r.json()).then(j=>console.log('server',j)).catch(e=>console.error(e));

  let msg = `ü¶Ö *EAGLE EYE TEAM - NEW BOOKING*\n\nName: ${payload.name}\nMobile: ${payload.mobile}\nEmail: ${payload.email||'‚Äî'}\nVillage: ${payload.village||'‚Äî'}\n\nSelected:\n`;
  payload.selections.forEach(s=>{
    msg += `- ${s.title} | ${s.camera} | ${s.days} day(s) | ‚Çπ${s.price} x ${s.days} = ‚Çπ${s.price*s.days}\n`;
    s.dates.forEach((d,i)=> msg += `   Day ${i+1}: ${d.date} ${d.time}\n`);
  });
  msg += `\nTotal: ‚Çπ${payload.total}\nAdvance(20%): ‚Çπ${payload.advance}\nNotes: ${payload.notes||'‚Äî'}`;
  
  const wa = `https://wa.me/${CONFIG.STUDIO_WHATSAPP}?text=` + encodeURIComponent(msg);
  window.open(wa,'_blank');
  alert('WhatsApp ‡§ñ‡•ã‡§≤‡§ï‡§∞ Send ‡§ï‡§∞‡•á‡§Ç ‚Äî Studio ‡§ï‡•ã ‡§®‡•ã‡§ü‡§ø‡§´‡§ø‡§ï‡•á‡§∂‡§® ‡§Æ‡§ø‡§≤‡•á‡§ó‡§æ‡•§');
}
</script>
</body>
</html>
